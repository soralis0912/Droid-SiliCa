# UI変更ガイド (UI Changes Guide)

このドキュメントでは、アプリの簡素化により変更されたUIについて詳しく説明します。

## 概要 (Overview)

アプリは非技術ユーザー向けに大幅に簡素化され、FeliCaの民主化という目的に集中しています。

### 主な変更点

1. **タブの削減**: 4タブ → 2タブ
   - 削除: Manual (マニュアル)
   - 削除: History (履歴)
   - 残存: Read (読み取り)
   - 残存: Write (書き込み)

2. **日本語化**: すべてのUI文字列を日本語に翻訳

3. **高度な機能の非表示**: エクスポート/インポート、ログ表示などを非表示

## 画面詳細 (Screen Details)

### 読み取りタブ (Read Tab)

#### 表示される要素

**ヘッダー**
- アプリ名: 「ドロイド SiliCa」
- タブ: 「読み取り」「書き込み」

**メインコンテンツ**
- タイトル: 「読み取り」
- 説明: 「カードをタップして読み取ります」

**オプション**
- ✅ チェックボックス: 「最後のエラーコマンドを取得」（デフォルトでチェック済み）
- ⬜ チェックボックス: 「指定したシステムブロックを読み取る」
- テキスト入力: 「読み取るブロック (10進数、カンマ区切り)」
  - ヘルパーテキスト: 「カンマまたはスペースで区切って追加の10進数ブロック番号を追加します。空白のままにするとデフォルトを使用します。」

**アクション**
- 青色ボタン: 「読み取り開始」
- アウトラインボタン: 「停止」（初期状態では無効）

**結果表示**
- ラベル: 「結果」
- テキストエリア: 「NFCタグをお待ちしています...」（初期状態）

#### 非表示の要素（visibility="gone"）

- エクスポートボタン（.hex形式）
- 全255ブロック読み取りボタン
- 進捗リセットボタン
- 生ログ表示エリア
- 生ログラベル

#### 動作フロー

1. ユーザーが「読み取り開始」をタップ
2. 結果エリアに「準備完了。デバイスの近くにカードをかざしてください。」と表示
3. NFCカードを検出
4. 読み取り処理を実行
5. 結果を表示:
   - IDm（8バイトの16進数）
   - PMm（8バイトの16進数）
   - システムコード
   - サービスコード
   - ブロックデータ（該当する場合）

### 書き込みタブ (Write Tab)

#### 表示される要素

**ヘッダー**
- タブ: 「読み取り」「書き込み」（書き込みが選択状態）

**メインコンテンツ**
- タイトル: 「書き込み」
- 説明: 「カードをタップして書き込みます」

**コマンド選択**
- ドロップダウン: 「コマンド」
  - オプション1: 「IDm / PMm」
  - オプション2: 「システムコード」
  - オプション3: 「サービスコード」
  - オプション4: 「生ブロック」

**IDm / PMm 入力グループ**（デフォルトで表示）
- テキスト入力: 「IDm (16桁の16進数)」
  - プレースホルダー: 大文字16進数
  - 最大長: 16文字
- テキスト入力: 「PMm 上書き (オプション)」
  - プレースホルダー: 大文字16進数
  - 最大長: 16文字

**システムコード入力グループ**（条件付き表示）
- テキスト入力: 「システムコード (16進数ペア)」
- ヘルパーテキスト: 「最大4つのシステムコードを入力してください (例: "12FC C000")。」

**サービスコード入力グループ**（条件付き表示）
- テキスト入力: 「サービスコード (16進数ペア)」
- ヘルパーテキスト: 「最大4つのサービスコードを入力してください (例: "100B 200B")。」

**生ブロック入力グループ**（条件付き表示）
- 数値入力: 「ブロック番号 (10進数 0-255)」
- テキスト入力: 「ブロックデータ (32桁の16進数)」

**アクション**
- 青色ボタン: 「書き込み開始」
- アウトラインボタン: 「キャンセル」（初期状態では無効）

**ステータス表示**
- ラベル: 「ステータス」
- テキストエリア: 「コマンドを選択して「開始」を押してください。」（初期状態）

#### 非表示の要素（visibility="gone"）

- ファイルからインポートボタン（.hex形式）
- ランダム化ボタン（IDm用）
- ランダム化ボタン（PMm用）
- 生ログ表示エリア
- 生ログラベル

#### 動作フロー

1. ユーザーがコマンドタイプを選択（IDm/PMm、システムコード、サービスコード、生ブロック）
2. 選択に応じた入力フィールドが表示される
3. 必要なデータを入力
4. 「書き込み開始」をタップ
5. ステータスエリアに「準備完了。書き込むにはデバイスにタグをかざしてください。」と表示
6. NFCカードを検出
7. 書き込み処理を実行
8. 結果を表示:
   - 成功: 「書き込み完了。」
   - エラー: 「書き込み失敗: [エラーメッセージ]」

## UI要素の配色とスタイル

### カラーパレット
- プライマリカラー: ダークブルー（#1A237E程度）
- アクセントカラー: ブルー
- 背景: ライトグレー/ホワイト
- テキスト: ダークグレー/ブラック

### タイポグラフィ
- タイトル: MaterialComponents.Headline6
- 説明: MaterialComponents.Body1
- ボタンテキスト: MaterialComponents.Button
- 入力フィールド: MaterialComponents.Body2

### レイアウト
- パディング: 16dp（標準）
- カード内パディング: 16dp
- 要素間マージン: 8dp〜12dp
- ボタン高さ: wrap_content（Material標準）

## アクセシビリティ

### 対応項目
- ✅ 十分なタッチターゲットサイズ（48dp以上）
- ✅ コントラスト比の確保
- ✅ 日本語のみの明確な説明文
- ✅ 入力フィールドのヒントテキスト

### 改善の余地
- スクリーンリーダー対応の強化
- より大きなフォントサイズのサポート
- カラーブラインド対応

## 比較: 変更前 vs 変更後

### タブバー

**変更前**
```
[Read] [Write] [Manual] [History]
```

**変更後**
```
[読み取り] [書き込み]
```

### 読み取り画面のボタン数

**変更前**
- Start Reading
- Stop
- Export last read (.hex)
- Read all 255 blocks
- Reset full read progress

**変更後**
- 読み取り開始
- 停止

削減: 5ボタン → 2ボタン

### 書き込み画面のボタン数

**変更前**
- Start Writing
- Cancel
- Write from .hex file
- Randomize (IDm)
- Randomize (PMm)

**変更後**
- 書き込み開始
- キャンセル

削減: 5ボタン → 2ボタン

## まとめ

この簡素化により、アプリは以下の点で改善されました：

1. **使いやすさの向上**: ボタンと機能を必要最小限に削減
2. **言語の統一**: すべて日本語で一貫性を確保
3. **目的の明確化**: FeliCa読み取りとSiliCa書き込みに特化
4. **学習コストの低減**: 複雑な機能を排除

高度な機能が必要なユーザーは、Python CLIツールを使用することができます。
