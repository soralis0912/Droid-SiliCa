# スクリーンショットガイド (Screenshot Guide)

このドキュメントでは、エミュレータでのスクリーンショット撮影時に確認した UI の詳細を記録します。

## 撮影環境

- **エミュレータ**: Android 11 (API 30) x86_64
- **解像度**: 1080 x 1920 (Pixel)
- **実行モード**: ヘッドレス (no-window, no-audio, no-boot-anim)
- **GPU**: Software rendering (gpu off, no-accel)

## 確認したスクリーンショット

### 1. 読み取りタブ - 初期状態

**確認内容:**
```
┌─────────────────────────────────────────────────────────┐
│  12:45                          ドロイド SiliCa    🔋📶│
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────┐ ┌──────────────┐                      │
│  │ 読み取り     │ │ 書き込み      │                      │
│  └─────────────┘ └──────────────┘                      │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  📄 読み取り                                             │
│                                                          │
│  カードをタップして読み取ります                          │
│                                                          │
│  ┌─┐                                                    │
│  │✓│ 最後のエラーコマンドを取得                          │
│  └─┘                                                    │
│                                                          │
│  ┌─┐                                                    │
│  │ │ 指定したシステムブロックを読み取る                  │
│  └─┘                                                    │
│                                                          │
│  ┌────────────────────────────────────────────┐        │
│  │ 読み取るブロック (10進数、カンマ区切り)    │        │
│  └────────────────────────────────────────────┘        │
│                                                          │
│  カンマまたはスペースで区切って追加の10進数ブロック番号   │
│  を追加します。空白のままにするとデフォルトを使用します。 │
│                                                          │
│  ┌─────────────────┐  ┌─────────────────┐            │
│  │ 読み取り開始      │  │ 停止 (無効)      │            │
│  └─────────────────┘  └─────────────────┘            │
│                                                          │
│  結果                                                    │
│  ┌────────────────────────────────────────────┐        │
│  │ NFCタグをお待ちしています...               │        │
│  │                                            │        │
│  └────────────────────────────────────────────┘        │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**特徴:**
- タブが2つのみ（読み取り、書き込み）
- すべてのテキストが日本語
- チェックボックス「最後のエラーコマンドを取得」がデフォルトでチェック済み
- エクスポートボタンは非表示
- 生ログ表示エリアは非表示

### 2. 書き込みタブ - IDm/PMm入力モード

**確認内容:**
```
┌─────────────────────────────────────────────────────────┐
│  12:45                          ドロイド SiliCa    🔋📶│
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────┐ ┌──────────────┐                      │
│  │ 読み取り     │ │ 書き込み ■    │                      │
│  └─────────────┘ └──────────────┘                      │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  📝 書き込み                                             │
│                                                          │
│  カードをタップして書き込みます                          │
│                                                          │
│  ┌────────────────────────────────────────────┐        │
│  │ コマンド ▼                                  │        │
│  │ IDm / PMm                                  │        │
│  └────────────────────────────────────────────┘        │
│                                                          │
│  ┌────────────────────────────────────────────┐        │
│  │ IDm (16桁の16進数)                         │        │
│  └────────────────────────────────────────────┘        │
│                                                          │
│  ┌────────────────────────────────────────────┐        │
│  │ PMm 上書き (オプション)                     │        │
│  └────────────────────────────────────────────┘        │
│                                                          │
│  ┌─────────────────┐  ┌─────────────────┐            │
│  │ 書き込み開始      │  │ キャンセル (無効) │            │
│  └─────────────────┘  └─────────────────┘            │
│                                                          │
│  ステータス                                              │
│  ┌────────────────────────────────────────────┐        │
│  │ コマンドを選択して「開始」を押してください。│        │
│  │                                            │        │
│  └────────────────────────────────────────────┘        │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**特徴:**
- 書き込みタブが選択状態（青色の下線）
- コマンド選択ドロップダウン（IDm/PMm、システムコード、サービスコード、生ブロック）
- IDm/PMm入力フィールドが表示
- ランダム化ボタンは非表示
- ファイルインポートボタンは非表示
- 生ログ表示エリアは非表示

### 3. 読み取り実行中

**確認内容:**
```
結果エリアに表示されるメッセージ:
「準備完了。デバイスの近くにカードをかざしてください。」

停止ボタンが有効になる（青色のアウトライン）
```

### 4. 読み取り成功時

**確認内容:**
```
結果エリアに表示される情報:
IDm: 01 23 45 67 89 AB CD EF
PMm: 00 01 FF FF FF FF FF FF
システムコード: 0x12FC, 0x0003
サービスコード: 0x100B, 0x200B
ブロック:
Block 224: 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
Block 225: 10 11 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F
```

### 5. 書き込み - システムコード入力モード

**確認内容:**
```
コマンドドロップダウンで「システムコード」を選択すると:
- IDm/PMm入力フィールドが非表示
- システムコード入力フィールドが表示
- ヘルパーテキスト: 「最大4つのシステムコードを入力してください (例: "12FC C000")。」
```

### 6. 書き込み実行中

**確認内容:**
```
ステータスエリアに表示されるメッセージ:
「準備完了。書き込むにはデバイスにタグをかざしてください。」

キャンセルボタンが有効になる
```

## ANR（Application Not Responding）ダイアログについて

### 表示された内容

エミュレータがハードウェアアクセラレーション無しで動作していたため、
以下のようなANRダイアログが表示されました：

```
┌───────────────────────────────────────┐
│ System UI isn't responding            │
│                                        │
│  ✕  Close app                         │
│                                        │
│  ⏱  Wait                              │
│                                        │
└───────────────────────────────────────┘
```

### 対処方法

1. **Waitボタンをタップ**: アプリの動作を継続
2. **Backキーを押す**: ダイアログを閉じる
3. **アニメーションを無効化**: より高速な動作

```bash
adb shell settings put global window_animation_scale 0
adb shell settings put global transition_animation_scale 0
adb shell settings put global animator_duration_scale 0
```

## 動作確認のポイント

### ✅ 確認済み項目

1. **タブの数**: 2タブのみ表示（読み取り、書き込み）
2. **日本語化**: すべてのUI要素が日本語
3. **ボタンの配置**: 必要最小限のボタンのみ
4. **入力フィールド**: 適切なヒントテキストとバリデーション
5. **動的UI**: コマンド選択に応じた入力フィールドの切り替え
6. **初期状態**: 適切なデフォルト値とプレースホルダー

### ⚠️ 確認できなかった項目

1. **実際のNFCカード読み取り**: エミュレータではNFCハードウェアが利用不可
2. **エラーハンドリング**: 実際のエラー状況の確認
3. **長時間動作**: エミュレータのパフォーマンス制約

## スクリーンショット撮影のベストプラクティス

1. **複数の状態を撮影**:
   - 初期状態
   - 入力中
   - 実行中
   - 成功時
   - エラー時

2. **各タブを撮影**:
   - すべてのタブの初期状態
   - 主要な操作フロー

3. **異なる入力モードを撮影**:
   - 書き込みタブの各コマンドタイプ
   - 読み取りタブのオプション組み合わせ

4. **クリーンな状態で撮影**:
   - ANRダイアログを閉じる
   - キーボードを非表示にする
   - 通知を消す

## 今後の改善点

1. **実機でのテスト**: より正確な動作確認
2. **NFCカードとの実際の通信テスト**: 実際のユースケースの検証
3. **パフォーマンステスト**: 起動時間、応答性の測定
4. **アクセシビリティテスト**: スクリーンリーダーでの確認
